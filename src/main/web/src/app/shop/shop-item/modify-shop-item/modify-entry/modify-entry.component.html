<div class="modify-shop-item-container">
	<h2>Posten {{mode === ModifyType.ADD ? 'hinzufügen' : 'bearbeiten'}}</h2>
	<form #modifyShopItemForm="ngForm" (ngSubmit)="submitModifiedObject()">

		<div class="entry-info-container">
			<mat-form-field>
				<input matInput name="titleInput"
					   required
					   placeholder="Titel"
					   #titleInput="ngModel"
					   [(ngModel)]="entryModel['name']">
				<mat-error *ngIf="titleInput.touched && !titleInput.valid" align="end">
					Dieses Feld darf nicht leer bleiben!
				</mat-error>
			</mat-form-field>
			<mat-form-field>
				<mat-select [(ngModel)]="entryModel['category']"
							[compareWith]="compareCategories"
							placeholder="Kategorie" #categorySelect="ngModel"
							name="categorySelect">
					<mat-option *ngFor="let option of (entryCategories$ | async)" [value]="option">
						{{option.name}}
					</mat-option>
				</mat-select>
			</mat-form-field>
		</div>

		<div class="entry-info-container">
			<div>
				<mat-form-field>
					<input matInput [matDatepicker]="myDatepicker"
						   placeholder="Datum"
						   [(ngModel)]="entryModel['date']"
						   #dateInput="ngModel"
						   name="dateInput" required>
					<mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
				</mat-form-field>
				<mat-datepicker [touchUi]="true" #myDatepicker></mat-datepicker>
			</div>
			<div>
				<mat-form-field>
					<input matInput name="valueInput"
						   type="number" required
						   placeholder="Wert"
						   #valueInput="ngModel"
						   [(ngModel)]="entryModel['value']">
					<span matSuffix>€</span>
					<mat-error *ngIf="valueInput.touched && !valueInput.valid" align="end">
						Dieses Feld darf nicht leer bleiben!
					</mat-error>
				</mat-form-field>
			</div>
		</div>

		<!--todo auto complete für event das dem entry zugewiesen ist-->

		<mat-form-field>
			<input matInput
				   tabindex="-1"
				   placeholder="Event"
				   name="eventInput"
				   [formControl]="autocompleteFormControl"
				   [matAutocomplete]="auto" required>
		</mat-form-field>
		<mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
			<mat-option *ngFor="let option of filteredOptions | async" [value]="option">
				{{option.title}}
			</mat-option>
		</mat-autocomplete>

		<!--below all that-->
		<div class="form-buttons">
			<!--	cancel button-->
			<button mat-button color="warning" type="button" (click)="cancel()">Abbrechen</button>
			<!--	save button-->
			<button mat-raised-button color="accent"
					[disabled]="!modifyShopItemForm.form.valid"
					type="submit">
				{{mode === ModifyType.ADD ? 'Erstellen' : 'Speichern'}}
			</button>
		</div>
	</form>
</div>
