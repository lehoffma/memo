<div class="modify-shop-item-container">
	<h2>Tour {{mode === ModifyType.ADD ? 'hinzufügen' : 'bearbeiten'}}</h2>
	<form #modifyShopItemForm="ngForm" (ngSubmit)="submitModifiedObject()">

		<memo-modify-item-inner-container [title]="'Bild'"
										  [formIsValid]="modifyShopItemForm.form.valid"
										  [saveButton]="mode === ModifyType.EDIT"
										  (onSave)="submitModifiedObject()"
		>
			<memo-profile-picture-form
				[image]="tourModel['imagePath'] ? tourModel['imagePath'] : defaultImageUrl"
				(onChange)="profilePictureChanged($event)">

			</memo-profile-picture-form>
		</memo-modify-item-inner-container>


		<memo-modify-item-inner-container [title]="'Tour-Informationen'"
										  [formIsValid]="modifyShopItemForm.form.valid"
										  [saveButton]="mode === ModifyType.EDIT"
										  (onSave)="submitModifiedObject()">
			<mat-form-field>
				<input matInput name="titleInput"
					   required
					   placeholder="Titel"
					   #titleInput="ngModel"
					   [(ngModel)]="tourModel['title']">
				<mat-hint *ngIf="titleInput.touched && !titleInput.valid" class="error-message" align="end">
					Dieses Feld darf nicht leer bleiben!
				</mat-hint>
			</mat-form-field>


			<mat-form-field class="description-input">
			<textarea autosize matInput name="descriptionInput"
					  class="not-resizable-textarea" required
					  type="text"
					  #descriptionInput="ngModel"
					  placeholder="Beschreibung"
					  [(ngModel)]="tourModel['description']">
			</textarea>
				<mat-hint *ngIf="descriptionInput.touched && !descriptionInput.valid" class="error-message"
						  align="end">
					Dieses Feld darf nicht leer bleiben!
				</mat-hint>
			</mat-form-field>

			<div class="additional-tour-info-container">
				<div>
					<mat-form-field>
						<input matInput name="priceInput"
							   type="number" required
							   placeholder="Preis"
							   #priceInput="ngModel"
							   [(ngModel)]="tourModel['price']">
						<span matSuffix>€</span>
						<mat-hint *ngIf="priceInput.touched && !priceInput.valid" class="error-message" align="end">
							Dieses Feld darf nicht leer bleiben!
						</mat-hint>
					</mat-form-field>

					<mat-form-field>
						<input matInput name="capacityInput"
							   type="number" required
							   placeholder="Kapazität"
							   #capacityInput="ngModel"
							   [(ngModel)]="tourModel['capacity']">
						<mat-hint *ngIf="capacityInput.touched && !capacityInput.valid" class="error-message"
								  align="end">
							Dieses Feld darf nicht leer bleiben!
						</mat-hint>
					</mat-form-field>
				</div>

				<div class="column">
					<mat-form-field>
						<input matInput name="vehicleInput"
							   type="text" required
							   placeholder="Fahrzeug"
							   #vehicleInput="ngModel"
							   [(ngModel)]="tourModel['vehicle']">
						<mat-hint *ngIf="vehicleInput.touched && !vehicleInput.valid" class="error-message" align="end">
							Dieses Feld darf nicht leer bleiben!
						</mat-hint>
					</mat-form-field>

				</div>

				<div class="column">
					<div>
						<mat-form-field>
							<input matInput [matDatepicker]="myDatepicker"
								   placeholder="Datum"
								   [(ngModel)]="tourModel['date']"
								   #dateInput="ngModel"
								   name="dateInput" required>
							<mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
						</mat-form-field>
						<mat-datepicker [touchUi]="true" #myDatepicker></mat-datepicker>
					</div>

					<mat-form-field>
						<input matInput
							   placeholder="Uhrzeit"
							   [(ngModel)]="tourModel['time']"
							   pattern="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"
							   #timeInput="ngModel"
							   name="timeInput" required>

						<mat-hint *ngIf="timeInput.touched && !timeInput.valid && tourModel['time'].length === 0"
								  class="error-message" align="end">
							Dieses Feld darf nicht leer bleiben!
						</mat-hint>
						<mat-hint *ngIf="timeInput.touched && !timeInput.valid && tourModel['time'].length > 0"
								  class="error-message" align="end">
							Die Uhrzeit muss im Format "HH:MM" vorliegen!
						</mat-hint>
					</mat-form-field>

				</div>
			</div>
		</memo-modify-item-inner-container>

		<memo-modify-item-inner-container [title]="'Route'"
										  [formIsValid]="modifyShopItemForm.form.valid"
										  [saveButton]="mode === ModifyType.EDIT"
										  (onSave)="submitModifiedObject()">
			<memo-tour-route-input [(route)]="tourModel['route']"
								   (distanceChange)="tourModel['miles'] = meterToMiles($event)"
								   [isTour]="true">

			</memo-tour-route-input>
		</memo-modify-item-inner-container>


		<!--below all that-->
		<div class="form-buttons">
			<!--	cancel button-->
			<button mat-button color="warning" type="button" (click)="cancel()">Abbrechen</button>
			<!--	save button-->
			<button mat-raised-button color="accent"
					[disabled]="!modifyShopItemForm.form.valid">
				{{mode === ModifyType.ADD ? 'Erstellen' : 'Speichern'}}
			</button>
		</div>
	</form>
</div>
