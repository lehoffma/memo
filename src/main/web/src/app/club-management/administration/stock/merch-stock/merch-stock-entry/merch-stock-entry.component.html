<div class="stock-entry-header">
	<div>
		<a routerLink="/merch/{{stockEntry?.item.id}}">
			<img src="{{stockEntry?.item.images[0]  || 'resources/images/Logo.png'}}"/>
		</a>

		<div>
			<a routerLink="/merch/{{stockEntry?.item.id}}">
				<h3>{{stockEntry?.item.title}}</h3>
			</a>
			<span class="secondary-text">{{stockEntry?.item.description}}</span>
		</div>
	</div>
</div>
<table>
	<thead>
	<tr>
		<th></th>
		<th *ngFor="let size of stockEntry.options.size">
			{{size}}
		</th>
		<th class="empty-column">
			<!--todo add size-->
			<!--<button mat-icon-button>-->
			<!--<mat-icon>add</mat-icon>-->
			<!--</button>-->
		</th>
		<th class="total-header">
			Gesamt
		</th>
	</tr>
	</thead>
	<tbody>
	<tr *ngFor="let color of stockEntry.options.color">
		<th class="color-container">
			<div class="merch-available-colors"
				 [style.background-color]="color.hex">

			</div>
			<span>{{color.name}}</span>
		</th>
		<td *ngFor="let size of stockEntry.options.size; let i = index"
			[ngClass]="{'is-zero': stockEntry.stockMap[size][color.name] === 0}"
			class="stock-amount-cell">
			{{stockEntry.stockMap[size][color.name]}}
		</td>
		<td>
			<!--empty because of the add button-->
		</td>
		<th>
			{{(totals$ | async)[color.name]}}
		</th>
	</tr>
	<!--<tr>-->
	<!--<td>-->
	<!--&lt;!&ndash;todo add color&ndash;&gt;-->
	<!--<button mat-icon-button>-->
	<!--<mat-icon>add</mat-icon>-->
	<!--</button>-->
	<!--</td>-->
	<!--</tr>-->
	<tr>
		<th>Gesamt</th>
		<th *ngFor="let size of stockEntry.options.size">
			{{(totals$ | async)[size]}}
		</th>
		<th>

		</th>
		<th class="total-sum">
			{{(totals$ | async)["total"]}}
		</th>
	</tr>
	</tbody>
</table>

<div class="stock-entry-footer">
	<a mat-button
	   matTooltip="Bestand bearbeiten"
	   routerLink="/merch/{{stockEntry?.item.id}}/stock/edit" class="hover-button">
		Bearbeiten
	</a>
	<div>
		<button mat-icon-button type="button"
				matTooltip="Merch lÃ¶schen"
				color="warn" (click)="deleteMerch(stockEntry?.item.id)" class="hover-button">
			<mat-icon>delete</mat-icon>
		</button>
	</div>
</div>
