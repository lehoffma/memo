<div class="stock-entry-header">
	<div>
		<a routerLink="/merch/{{stockEntry?.item.id}}">
			<img src="{{stockEntry?.item.imagePath}}"/>
		</a>

		<div>
			<a routerLink="/merch/{{stockEntry?.item.id}}">
				<h3>{{stockEntry?.item.title}}</h3>
			</a>
			<span class="secondary-text">{{stockEntry?.item.description}}</span>
		</div>
	</div>

	<md-menu #menu="mdMenu">
		<a md-menu-item
		   routerLink="/merch/{{stockEntry?.item.id}}/edit">
			<md-icon>edit</md-icon>
			<span>Bearbeiten</span>
		</a>
		<button md-menu-item type="button" (click)="deleteMerch(stockEntry?.item.id)">
			<md-icon>delete</md-icon>
			<span>LÃ¶schen</span>
		</button>
	</md-menu>
	<button md-icon-button [mdMenuTriggerFor]="menu">
		<md-icon>more_vert</md-icon>
	</button>


</div>
<table>
	<thead>
	<tr>
		<th></th>
		<th *ngFor="let size of stockEntry.options.size">
			{{size}}
		</th>
		<th class="empty-column">
			<!--todo add size-->
			<!--<button md-icon-button>-->
				<!--<md-icon>add</md-icon>-->
			<!--</button>-->
		</th>
		<th class="total-header">
			Gesamt
		</th>
	</tr>
	</thead>
	<tbody>
		<tr *ngFor="let color of stockEntry.options.color">
			<th class="color-container">
				<div class="merch-available-colors"
					[style.background-color]="color.hex">

				</div>
				<span>{{color.name}}</span>
			</th>
			<td *ngFor="let size of stockEntry.options.size; let i = index"
				[ngClass]="{'is-zero': stockEntry.stockMap[size][color.name] === 0}"
				class="stock-amount-cell">
				{{stockEntry.stockMap[size][color.name]}}
			</td>
			<td>
				<!--empty because of the add button-->
			</td>
			<th>
				{{(totals$ | async)[color.name]}}
			</th>
		</tr>
		<!--<tr>-->
			<!--<td>-->
				<!--&lt;!&ndash;todo add color&ndash;&gt;-->
				<!--<button md-icon-button>-->
					<!--<md-icon>add</md-icon>-->
				<!--</button>-->
			<!--</td>-->
		<!--</tr>-->
		<tr>
			<th>Gesamt</th>
			<th *ngFor="let size of stockEntry.options.size">
				{{(totals$ | async)[size]}}
			</th>
			<th>

			</th>
			<th class="total-sum">
				{{(totals$ | async)["total"]}}
			</th>
		</tr>
	</tbody>
</table>
