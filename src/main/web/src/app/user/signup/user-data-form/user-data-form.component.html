<div class="modify-shop-item-container" *ngLet="isDesktop$ | async as isDesktop">
	<h3 class="container--header" *ngIf="showHeader">
		Nutzer bearbeiten
	</h3>
	<form (ngSubmit)="submit()" [formGroup]="userDataForm" novalidate>
		<memo-item-details-content [title]="'Profilbild'"
								   [direction]="!(isDesktop) ? 'vertical' : 'horizontal'"
								   subtitle="Optional"

		>
			<memo-multi-image-upload class="mat-elevation-z3"
				[formGroup]="userDataForm.get('images')"
				[previousValue]="previousValue?.images"
				[limit]="1"
			>

			</memo-multi-image-upload>
		</memo-item-details-content>

		<memo-item-details-content [title]="'Persönliche Daten'"
								   [direction]="!(isDesktop) ? 'vertical' : 'horizontal'">
			<memo-personal-data-form [formGroup]="userDataForm.get('personal-data')"></memo-personal-data-form>
		</memo-item-details-content>
		<memo-item-details-content [title]="'Addressen'"
								   subtitle="Wird für Abrechnungen benötigt (Optional bis zum Abschluss eines Kaufs)"
								   [direction]="!(isDesktop) ? 'vertical' : 'horizontal'">
			<memo-address-form class="mat-elevation-z3" [formGroup]="userDataForm"></memo-address-form>
		</memo-item-details-content>

		<memo-item-details-content [title]="'Account Informationen'" *ngIf="withEmailAndPassword"
								   subtitle="Passwort bleibt unverändert wenn Feld leer gelassen wird"
								   [direction]="!(isDesktop) ? 'vertical' : 'horizontal'">
			<memo-email-input [form]="userDataForm.get('account-data')"></memo-email-input>
			<memo-password-input [form]="userDataForm.get('account-data')" [required]="false">

			</memo-password-input>
		</memo-item-details-content>

		<!--todo permissions component?-->

		<memo-item-details-content [title]="'Vereinsinformationen'" *ngIf="loginService.isLoggedInObservable() | async"
								   [direction]="!(isDesktop) ? 'vertical' : 'horizontal'">
			<memo-club-information-form
				[formGroup]="userDataForm.get('club-information')"></memo-club-information-form>
		</memo-item-details-content>


		<div class="form-buttons">
			<button mat-button color="warning" type="button" (click)="cancel()">Abbrechen</button>

			<button mat-raised-button color="accent"
					[disabled]="!userDataForm.valid || userDataForm.pending || modifyItemService.loading">
				<span *ngIf="!modifyItemService.loading; else loadingSpinner">
					Speichern
				</span>
				<ng-template #loadingSpinner>
					<mat-icon class="loading-spinner">refresh</mat-icon>
					<span>Speichert...</span>
				</ng-template>
			</button>
		</div>
	</form>

</div>
